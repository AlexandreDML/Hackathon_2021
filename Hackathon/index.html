<!DOCTYPE html>
<html>
<head>
	<title>Hackathon</title>
    <meta charset="UTF-8">

		<!-- CSS -->
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" />

		<!-- JAVASCRIPT -->
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap.js"></script>

		<!-- FONT  -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Readex+Pro&display=swap" rel="stylesheet">
</head>
<body>
	<center style="vertical-align: middle;"><canvas id="canvas">
  Canvas requiert un navigateur moderne: Chrome, Firefox, Edge, Opera, Safari.
</canvas></center>
    <div class="container">
      <header id="hackathon">
				<img src="./images/EDF.png">
        <div>HACKATHON</div>
      </header>
        <div class="HUD" >
					<div class="row">
  					<div class="col-sm-6 card">
  							<ul>
                  <li>Production</li>
                  <li>Consommation</li>
                  <li>Heure</li>
                </ul>
  					</div>
  					<div id="tutorial"class="col-sm-6 card">
  							<p> Tutorial pour jouer </p>
                <input type="button" name="play" value="play">
  					</div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div id="Golo" class="info card" draggable="true" ondragstart="drag(event)" id="drag1">
                <p>Aménagement hydraulique du Golo</p>
								<button type="button" class="btn-close" onclick="document.getElementById('Golo').style.display = 'none'"></button>
								<span>Off</span>
								<label class="switch">
								  <input type="checkbox">
								  <span class="slider round"></span>
								</label>
								<span>On</span>
								<div class="choice">
                	<input type="button" name="valider" value="valider">
                	<input type="button" name="annuler" value="annuler">
								</div>
							</div>
              <div id="Prunelli" class="info card" draggable="true" ondragstart="drag(event)" id="drag1" >
                <p>Aménagement hydraulique du Prunelli</p>
								<button type="button" class="btn-close" onclick="document.getElementById('Prunelli').style.display = 'none'"></button>
								<span>Off</span>
								<label class="switch">
								  <input type="checkbox">
								  <span class="slider round"></span>
								</label>
								<span>On</span>
								<div>
                	<input type="button" name="valider" value="valider">
                	<input type="button" name="annuler" value="annuler">
								</div>
              </div>
              <div class="info card" style="display: none">
                <p>Centrale thermique Vazzio</p>
								<span>Off</span>
								<label class="switch">
								  <input type="checkbox">
								  <span class="slider round"></span>
								</label>
								<span>On</span>
								<div>
                	<input type="button" name="valider" value="valider">
                	<input type="button" name="annuler" value="annuler">
								</div>
              </div>
              <div class="info card" style="display: none">
                <p>Centrale thermique Lucciana</p>
								<span>Off</span>
								<label class="switch">
								  <input type="checkbox">
								  <span class="slider round"></span>
								</label>
								<span>On</span>
								<div>
                	<input type="button" name="valider" value="valider">
                	<input type="button" name="annuler" value="annuler">
								</div>
              </div>
              <div class="info card" style="display: none">
                <p>Centrale thermique Lucciana</p>
								<span>Off</span>
								<label class="switch">
								  <input type="checkbox">
								  <span class="slider round"></span>
								</label>
								<span>On</span>
								<div>
                	<input type="button" name="valider" value="valider">
                	<input type="button" name="annuler" value="annuler">
								</div>
              </div>
              <div class="info card" style="display: none">
                <p>Centrale Biogaz</p>
								<span>Off</span>
								<label class="switch">
								  <input type="checkbox">
								  <span class="slider round"></span>
								</label>
								<span>On</span>
								<div>
                	<input type="button" name="valider" value="valider">
                	<input type="button" name="annuler" value="annuler">
								</div>
              </div>
              <div class="info card" style="display: none">
                <p>Panneau photovoltaïque Porto-Vecchio</p>
								<span>Off</span>
								<label class="switch">
								  <input type="checkbox">
								  <span class="slider round"></span>
								</label>
								<span>On</span>
								<div>
                	<input type="button" name="valider" value="valider">
                	<input type="button" name="annuler" value="annuler">
								</div>
              </div>
              <div class="info card" style="display: none">
                <p>Panneau photovoltaïque Bonifacio</p>
								<span>Off</span>
								<label class="switch">
								  <input type="checkbox">
								  <span class="slider round"></span>
								</label>
								<span>On</span>
								<div>
                	<input type="button" name="valider" value="valider">
                	<input type="button" name="annuler" value="annuler">
								</div>
              </div>
            </div>
          </div>
        </div>
</body>
<script type="text/javascript">
// canvas variables
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var $canvas = $("#canvas");
var canvasOffset = $canvas.offset();
var offsetX = canvasOffset.left;
var offsetY = canvasOffset.top;
var scrollX = $canvas.scrollLeft();
var scrollY = $canvas.scrollTop();

// set styles
ctx.fillStyle = "";
ctx.strokeStyle = "lightgray";
ctx.lineWidth = 1;

// create a triangle and parallelogram object

var triangle = {
    points: [{
        x: 25,
        y: 100
    }, {
        x: 50,
        y: 50
    }],
    message: "I am a triangle"
}

var parallelogram = {
    points: [{
        x: 150,
        y: 50
    }, {
        x: 250,
        y: 50
    }, {
        x: 200,
        y: 100
    }, {
        x: 100,
        y: 100
    }],
    message: "I am a parallelogram"
}

// save the triangle and parallelogram in a shapes[] array

var shapes = [];
shapes.push(triangle);
shapes.push(parallelogram);

// function to draw (but not fill/stroke) a shape
// (needed because isPointInPath only tests the last defined path)

function define(shape) {
    var points = shape.points;
    ctx.beginPath();
    ctx.moveTo(points[0].x, points[0].y);
    for (var i = 1; i < points.length; i++) {
        ctx.lineTo(points[i].x, points[i].y);
    }
}

// function to display a shape on the canvas (define + fill + stroke)

function draw(shape) {
    define(shape);
    ctx.fill();
    ctx.stroke();
}

// display the triangle and parallelogram
draw(triangle);
draw(parallelogram);


// called when user clicks the mouse

function handleMouseDown(e) {
    e.preventDefault();

    // get the mouse position
    var mouseX = parseInt(e.clientX - offsetX);
    var mouseY = parseInt(e.clientY - offsetY);

		console.log(mouseX, mouseY);

    // iterate each shape in the shapes array
    for (var i = 0; i < shapes.length; i++) {
        var shape = shapes[i];
        // define the current shape
        define(shape);
        // test if the mouse is in the current shape
        if (ctx.isPointInPath(mouseX, mouseY)) {
            // if inside, display the shape's message
            alert(shape.message);
        }
    }

}

function allowDrop(ev) {
  ev.preventDefault();
}

function drag(ev) {
  ev.dataTransfer.setData("text", ev.target.id);
}

function drop(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
  ev.target.appendChild(document.getElementById(data));
}

// listen for mousedown events
$("#canvas").mousedown(function (e) {
    handleMouseDown(e);
});

</script>
</html>
